jobs:
- job: Packages_Validation

  pool:
    vmImage: 'windows-2022'

  strategy:
    matrix:
      DefaultArguments:
        templateArgs: ''
      BlankApp:
        templateArgs: '-preset blank'
      SkiaOnlyHeads:
        templateArgs: '-platforms gtk wpf linux-fb'
      MobileOnlyHeads:
        templateArgs: '-platforms android ios maccatalyst'
    #   BlankMarkupApp:
    #     templateArgs: '-preset blank -markup csharp'
      BlankAppCpm:
        templateArgs: '-preset blank --cpm true'
      MVVM:
        templateArgs: '-presentation mvvm'
      CentralPackageManagement:
        templateArgs: '--cpm true'
    #   CSharpMarkup:
    #     templateArgs: '-markup csharp'
      NoAppHosting:
        templateArgs: '-di false'
      HostingOnly:
        templateArgs: '-config false -loc false -http false -log none --navigation blank'
      NoConfiguration:
        templateArgs: '-config false'
      NoLocalization:
        templateArgs: '-loc false'
      NoHttp:
        templateArgs: '-http false'
      NoSerilog:
        templateArgs: '-log default'
      NoServer:
        templateArgs: '-server false'
      NoServerNoHttp:
        templateArgs: '-server false -http false'
      FrameNavigation:
        templateArgs: '--navigation blank'
      Net6:
        templateArgs: '-tfm net6.0'
      # https://github.com/unoplatform/uno.templates/issues/22
      Issue22:
        templateArgs: '-preset blank -tfm net7.0 -platforms android -platforms ios -platforms maccatalyst -platforms macos -platforms windows -platforms wasm -platforms gtk -platforms wpf -platforms linux-fb -presentation mvvm -server false -tests "" -vscode false -pwa false -di true -nav regions -log none -theme material'

  variables:
    - name: UseDotNetNativeToolchain
      value: false

  steps:
  - template: templates/package-validation.yml
    parameters:
      arguments: ${{ parameters.templateArgs }}
